
**基本概念**

- 吞吐量：系統在單位時間內能處理的工作量
    - 例如：每秒處理請求數(RPS)或資料傳輸量(MB/s)
- 延遲時間：從發出請求到收到回應所需時間(通常以毫秒計)


權衡？
- 資料庫
	- 一個一個來：每一個低延遲，但是全部變慢(吞吐量低)
	- 批量製作：全部變快（吞吐量大幅提升），但每一個的平均等待時間變慢（延遲增加）

**技術例子**
- Nagle演算法：等待累積資料再發送，提高網路利用率但增加延遲
- CPU快取：小型快速快取(低延遲) v s大型較慢快取(高吞吐量)

**根本原因**
- why 批次處理可以增加吞吐量？-> 固定成本攤銷到更多工作單元

**評估與管理方法**
- **第一步：明確業務需求和SLA**
    - 即時通訊：對延遲敏感
    - 資料分析：需高吞吐量，可接受較高延遲
- **第二步：建立效能測試和監控體系**
    - 使用JMeter、wrk、k6等工具
    - 關注P95、P99等延遲百分位數
- **第三步：識別系統瓶頸**
    - 使用APM工具(New Relic、Datadog等)
    - 關注各層面：應用邏輯、資料庫、網路等
- **第四步：評估最佳化策略**
    - 立即寫入：延遲低，吞吐量受限
    - 批次寫入：延遲較高，吞吐量大幅提升
    - 非同步寫入：延遲低，吞吐量高，但增加複雜性
- **第五步：選擇適當架構模式**
    - 同步處理：延遲可預測，吞吐量受限
    - 非同步處理：提高吞吐量，延遲可能變異
    - 事件驅動：解耦提高吞吐量，可能增加端到端延遲
    - 微服務：獨立最佳化服務，網路通訊可能增加延遲

**實際案例：電商訂單處理**
- 延遲優先：同步處理所有步驟，提供即時確認
- 吞吐量優先：拆分為非同步步驟，提高併發處理能力
- 混合策略：根據商品特性選擇不同處理方式

**實用評估工具**
- **效能預算**：為系統各部分分配延遲預算
- **多維度指標**：延遲分佈、錯誤率、資源利用率等
- **A/B測試**：小規模測試不同實現方案